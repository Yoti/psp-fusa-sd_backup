	.set noreorder
	.set noat

	.global copy32to16f2
	.ent	copy32to16f2

copy32to16f2:
	lui	$a2, 0x4000
	or	$a1, $a1, $a2
	li	$a2, 0
	li	$t1, 217
        li	$t2, 393216
	ori	$t2, $t2, 0x2400

3:
	li	$t8, 4
	addiu	$a0, $a0, (512*4)
        
1:
	addiu	$a1, $a1, (96*2)
	li	$t0, (480/80)
2:
	addu	$a2, $a1, $t2
################################################################################
	lv.q	C000, 0($a0)
	lv.q	C010, 16($a0)
	lv.q	C020, 32($a0)
	lv.q	C030, 48($a0)

	vt5650.q C100, C000
	vt5650.q C102, C010
	vt5650.q C110, C020
	vt5650.q C112, C030
	mfv	$t3, S100
	mfv	$t4, S101
	mfv	$t5, S102
	mfv	$t6, S103
	mfv	$t7, S110
##############################
	sh	$t3, 0($a1)
	sh	$t3, 0($a2)

	srl	$t3, $t3, 16

	sh	$t3, 2($a1)
	sh	$t3, 4($a1)

	sh	$t3, 2($a2)
	sh	$t3, 4($a2)
###
	sh	$t4, 6($a1)
	sh	$t4, 6($a2)
	srl	$t4, $t4, 16
	sh	$t4, 8($a1)
	sh	$t4, 8($a2)
###
	sh	$t5, 10($a1)
	sh	$t5, 12($a1)

	sh	$t5, 10($a2)
	sh	$t5, 12($a2)

	srl	$t5, $t5, 16

	sh	$t5, 14($a1)
	sh	$t5, 14($a2)
### ###
	sh	$t6, 16($a1)
	sh	$t6, 18($a1)

	sh	$t6, 16($a2)
	sh	$t6, 18($a2)

	srl	$t6, $t6, 16

	sh	$t6, 20($a1)
	sh	$t6, 20($a2)
###
	sh	$t7, 22($a1)
	sh	$t7, 22($a2)

	srl	$t7, $t7, 16

	sh	$t7, 24($a1)
	sh	$t7, 26($a1)

	sh	$t7, 24($a2)
	sh	$t7, 26($a2)
##############################

	mfv	$t3, S111
	mfv	$t4, S112
	mfv	$t5, S113
	lv.q	C000, 64($a0)
	lv.q	C010, 80($a0)
	lv.q	C020, 96($a0)
	lv.q	C030, 112($a0)

	vt5650.q C100, C000
	vt5650.q C102, C010
	vt5650.q C110, C020
	vt5650.q C112, C030
	mfv	$t6, S100
	mfv	$t7, S101
##############################
	addiu	$a1, $a1, (14*2)
	addiu	$a2, $a2, (14*2)
##############################
	sh	$t3, 0($a1)
	sh	$t3, 0($a2)

	srl	$t3, $t3, 16

	sh	$t3, 2($a1)
	sh	$t3, 4($a1)

	sh	$t3, 2($a2)
	sh	$t3, 4($a2)
###
	sh	$t4, 6($a1)
	sh	$t4, 6($a2)
	srl	$t4, $t4, 16
	sh	$t4, 8($a1)
	sh	$t4, 8($a2)
###
	sh	$t5, 10($a1)
	sh	$t5, 12($a1)

	sh	$t5, 10($a2)
	sh	$t5, 12($a2)

	srl	$t5, $t5, 16

	sh	$t5, 14($a1)
	sh	$t5, 14($a2)
### ###
	sh	$t6, 16($a1)
	sh	$t6, 18($a1)

	sh	$t6, 16($a2)
	sh	$t6, 18($a2)

	srl	$t6, $t6, 16

	sh	$t6, 20($a1)
	sh	$t6, 20($a2)
###
	sh	$t7, 22($a1)
	sh	$t7, 22($a2)

	srl	$t7, $t7, 16

	sh	$t7, 24($a1)
	sh	$t7, 26($a1)

	sh	$t7, 24($a2)
	sh	$t7, 26($a2)
##############################

	mfv	$t3, S102
	mfv	$t4, S103
	mfv	$t5, S110
	mfv	$t6, S111
	mfv	$t7, S112
##############################
	addiu	$a1, $a1, (14*2)
	addiu	$a2, $a2, (14*2)
##############################
	sh	$t3, 0($a1)
	sh	$t3, 0($a2)

	srl	$t3, $t3, 16

	sh	$t3, 2($a1)
	sh	$t3, 4($a1)

	sh	$t3, 2($a2)
	sh	$t3, 4($a2)
###
	sh	$t4, 6($a1)
	sh	$t4, 6($a2)
	srl	$t4, $t4, 16
	sh	$t4, 8($a1)
	sh	$t4, 8($a2)
###
	sh	$t5, 10($a1)
	sh	$t5, 12($a1)

	sh	$t5, 10($a2)
	sh	$t5, 12($a2)

	srl	$t5, $t5, 16

	sh	$t5, 14($a1)
	sh	$t5, 14($a2)
### ###
	sh	$t6, 16($a1)
	sh	$t6, 18($a1)

	sh	$t6, 16($a2)
	sh	$t6, 18($a2)

	srl	$t6, $t6, 16

	sh	$t6, 20($a1)
	sh	$t6, 20($a2)
###
	sh	$t7, 22($a1)
	sh	$t7, 22($a2)

	srl	$t7, $t7, 16

	sh	$t7, 24($a1)
	sh	$t7, 26($a1)

	sh	$t7, 24($a2)
	sh	$t7, 26($a2)
##############################

	mfv	$t3, S113
	lv.q	C000, 128($a0)
	lv.q	C010, 144($a0)
	lv.q	C020, 160($a0)
	lv.q	C030, 176($a0)

	vt5650.q C100, C000
	vt5650.q C102, C010
	vt5650.q C110, C020
	vt5650.q C112, C030
	mfv	$t4, S100
	mfv	$t5, S101
	mfv	$t6, S102
	mfv	$t7, S103
##############################
	addiu	$a1, $a1, (14*2)
	addiu	$a2, $a2, (14*2)
##############################
	sh	$t3, 0($a1)
	sh	$t3, 0($a2)

	srl	$t3, $t3, 16

	sh	$t3, 2($a1)
	sh	$t3, 4($a1)

	sh	$t3, 2($a2)
	sh	$t3, 4($a2)
###
	sh	$t4, 6($a1)
	sh	$t4, 6($a2)
	srl	$t4, $t4, 16
	sh	$t4, 8($a1)
	sh	$t4, 8($a2)
###
	sh	$t5, 10($a1)
	sh	$t5, 12($a1)

	sh	$t5, 10($a2)
	sh	$t5, 12($a2)

	srl	$t5, $t5, 16

	sh	$t5, 14($a1)
	sh	$t5, 14($a2)
### ###
	sh	$t6, 16($a1)
	sh	$t6, 18($a1)

	sh	$t6, 16($a2)
	sh	$t6, 18($a2)

	srl	$t6, $t6, 16

	sh	$t6, 20($a1)
	sh	$t6, 20($a2)
###
	sh	$t7, 22($a1)
	sh	$t7, 22($a2)

	srl	$t7, $t7, 16

	sh	$t7, 24($a1)
	sh	$t7, 26($a1)

	sh	$t7, 24($a2)
	sh	$t7, 26($a2)
##############################

	mfv	$t3, S110
	mfv	$t4, S111
	mfv	$t5, S112
	mfv	$t6, S113
	lv.q	C000, 192($a0)
	lv.q	C010, 208($a0)
	lv.q	C020, 224($a0)
	lv.q	C030, 240($a0)

	vt5650.q C100, C000
	vt5650.q C102, C010
	vt5650.q C110, C020
	vt5650.q C112, C030
	mfv	$t7, S100
##############################
	addiu	$a1, $a1, (14*2)
	addiu	$a2, $a2, (14*2)
##############################
	sh	$t3, 0($a1)
	sh	$t3, 0($a2)

	srl	$t3, $t3, 16

	sh	$t3, 2($a1)
	sh	$t3, 4($a1)

	sh	$t3, 2($a2)
	sh	$t3, 4($a2)
###
	sh	$t4, 6($a1)
	sh	$t4, 6($a2)
	srl	$t4, $t4, 16
	sh	$t4, 8($a1)
	sh	$t4, 8($a2)
###
	sh	$t5, 10($a1)
	sh	$t5, 12($a1)

	sh	$t5, 10($a2)
	sh	$t5, 12($a2)

	srl	$t5, $t5, 16

	sh	$t5, 14($a1)
	sh	$t5, 14($a2)
### ###
	sh	$t6, 16($a1)
	sh	$t6, 18($a1)

	sh	$t6, 16($a2)
	sh	$t6, 18($a2)

	srl	$t6, $t6, 16

	sh	$t6, 20($a1)
	sh	$t6, 20($a2)
###
	sh	$t7, 22($a1)
	sh	$t7, 22($a2)

	srl	$t7, $t7, 16

	sh	$t7, 24($a1)
	sh	$t7, 26($a1)

	sh	$t7, 24($a2)
	sh	$t7, 26($a2)
##############################

	mfv	$t3, S101
	mfv	$t4, S102
	mfv	$t5, S103
	mfv	$t6, S110
	mfv	$t7, S111
##############################
	addiu	$a1, $a1, (14*2)
	addiu	$a2, $a2, (14*2)
##############################
	sh	$t3, 0($a1)
	sh	$t3, 0($a2)

	srl	$t3, $t3, 16

	sh	$t3, 2($a1)
	sh	$t3, 4($a1)

	sh	$t3, 2($a2)
	sh	$t3, 4($a2)
###
	sh	$t4, 6($a1)
	sh	$t4, 6($a2)
	srl	$t4, $t4, 16
	sh	$t4, 8($a1)
	sh	$t4, 8($a2)
###
	sh	$t5, 10($a1)
	sh	$t5, 12($a1)

	sh	$t5, 10($a2)
	sh	$t5, 12($a2)

	srl	$t5, $t5, 16

	sh	$t5, 14($a1)
	sh	$t5, 14($a2)
### ###
	sh	$t6, 16($a1)
	sh	$t6, 18($a1)

	sh	$t6, 16($a2)
	sh	$t6, 18($a2)

	srl	$t6, $t6, 16

	sh	$t6, 20($a1)
	sh	$t6, 20($a2)
###
	sh	$t7, 22($a1)
	sh	$t7, 22($a2)

	srl	$t7, $t7, 16

	sh	$t7, 24($a1)
	sh	$t7, 26($a1)

	sh	$t7, 24($a2)
	sh	$t7, 26($a2)
##############################

	mfv	$t3, S112
	mfv	$t4, S113
	lv.q	C000, 256($a0)
	lv.q	C010, 272($a0)
	lv.q	C020, 288($a0)
	lv.q	C030, 304($a0)

	vt5650.q C100, C000
	vt5650.q C102, C010
	vt5650.q C110, C020
	vt5650.q C112, C030
	mfv	$t5, S100
	mfv	$t6, S101
	mfv	$t7, S102
##############################
	addiu	$a1, $a1, (14*2)
	addiu	$a2, $a2, (14*2)
##############################
	sh	$t3, 0($a1)
	sh	$t3, 0($a2)

	srl	$t3, $t3, 16

	sh	$t3, 2($a1)
	sh	$t3, 4($a1)

	sh	$t3, 2($a2)
	sh	$t3, 4($a2)
###
	sh	$t4, 6($a1)
	sh	$t4, 6($a2)
	srl	$t4, $t4, 16
	sh	$t4, 8($a1)
	sh	$t4, 8($a2)
###
	sh	$t5, 10($a1)
	sh	$t5, 12($a1)

	sh	$t5, 10($a2)
	sh	$t5, 12($a2)

	srl	$t5, $t5, 16

	sh	$t5, 14($a1)
	sh	$t5, 14($a2)
### ###
	sh	$t6, 16($a1)
	sh	$t6, 18($a1)

	sh	$t6, 16($a2)
	sh	$t6, 18($a2)

	srl	$t6, $t6, 16

	sh	$t6, 20($a1)
	sh	$t6, 20($a2)
###
	sh	$t7, 22($a1)
	sh	$t7, 22($a2)

	srl	$t7, $t7, 16

	sh	$t7, 24($a1)
	sh	$t7, 26($a1)

	sh	$t7, 24($a2)
	sh	$t7, 26($a2)
##############################

	mfv	$t3, S103
	mfv	$t4, S110
	mfv	$t5, S111
	mfv	$t6, S112
	mfv	$t7, S113
##############################
	addiu	$a1, $a1, (14*2)
	addiu	$a2, $a2, (14*2)
##############################
	sh	$t3, 0($a1)
	sh	$t3, 0($a2)

	srl	$t3, $t3, 16

	sh	$t3, 2($a1)
	sh	$t3, 4($a1)

	sh	$t3, 2($a2)
	sh	$t3, 4($a2)
###
	sh	$t4, 6($a1)
	sh	$t4, 6($a2)
	srl	$t4, $t4, 16
	sh	$t4, 8($a1)
	sh	$t4, 8($a2)
###
	sh	$t5, 10($a1)
	sh	$t5, 12($a1)

	sh	$t5, 10($a2)
	sh	$t5, 12($a2)

	srl	$t5, $t5, 16

	sh	$t5, 14($a1)
	sh	$t5, 14($a2)
### ###
	sh	$t6, 16($a1)
	sh	$t6, 18($a1)

	sh	$t6, 16($a2)
	sh	$t6, 18($a2)

	srl	$t6, $t6, 16

	sh	$t6, 20($a1)
	sh	$t6, 20($a2)
###
	sh	$t7, 22($a1)
	sh	$t7, 22($a2)

	srl	$t7, $t7, 16

	sh	$t7, 24($a1)
	sh	$t7, 26($a1)

	sh	$t7, 24($a2)
	sh	$t7, 26($a2)
##############################

################################################################################
	addiu	$t0, $t0, -1
	addiu	$a0, $a0, (80*4)
	bnez	$t0, 2b

# horizontal loop 480
	addiu	$a1, $a1, 14*2

	addiu	$t1, $t1, -1
	addiu	$t8, $t8, -1

	beqz	$t8, 3b # skip line
	addiu	$a0, $a0, (32*4)

	bnez	$t1, 1b
# vertical loop 272
	nop

	jr		$ra
	nop

	.end 	copy32to16f2
